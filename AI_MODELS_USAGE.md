# ü§ñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–Ω—ã—Ö AI –º–æ–¥–µ–ª–µ–π –≤ bots.py

## üìã –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π (ai.py)

AI —Å–∏—Å—Ç–µ–º–∞ –æ–±—É—á–∞–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–æ–¥–µ–ª–∏ –≤ `data/ai/models/`:

```
data/ai/models/
‚îú‚îÄ‚îÄ signal_predictor.pkl      # –ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ (LONG/SHORT/WAIT)
‚îú‚îÄ‚îÄ profit_predictor.pkl      # –ú–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ scaler.pkl                # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îú‚îÄ‚îÄ signal_predictor_metadata.json  # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ profit_predictor_metadata.json  # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π (AITrainer)

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `AITrainer` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏:

```python
# –í bot_engine/ai/ai_trainer.py
def _load_models(self):
    """–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏"""
    if os.path.exists('data/ai/models/signal_predictor.pkl'):
        self.signal_predictor = joblib.load('data/ai/models/signal_predictor.pkl')
        logger.info("‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤")
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ bots.py (bot_class.py)

–ë–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `ai_integration.py`:

```python
# –í bots_modules/bot_class.py
from bot_engine.ai.ai_integration import should_open_position_with_ai

# –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —É—Å–ª–æ–≤–∏–π –≤—Ö–æ–¥–∞
ai_result = should_open_position_with_ai(
    symbol='BTCUSDT',
    direction='LONG',
    rsi=28,
    trend='UP',
    price=50000,
    config=auto_config
)

if not ai_result.get('should_open'):
    return False  # AI –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–¥–µ–ª–∫—É
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 1: –û–±—É—á–µ–Ω–∏–µ (ai.py)

```bash
python ai.py
```

AI —Å–∏—Å—Ç–µ–º–∞:
1. –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ bots.py (—Å–≤–µ—á–∏, RSI, –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–π–¥–æ–≤)
2. –û–±—É—á–∞–µ—Ç –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–µ–π–¥–æ–≤
3. **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–æ–¥–µ–ª–∏** –≤ `data/ai/models/`

–õ–æ–≥–∏:
```
[AI] ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤: data/ai/models/signal_predictor.pkl
[AI] ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏: data/ai/models/profit_predictor.pkl
[AI] ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω scaler: data/ai/models/scaler.pkl
[AI] üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –º–æ–¥–µ–ª–µ–π: 3/3
[AI] üìÅ –ú–æ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: data/ai/models
[AI] ü§ñ –ú–æ–¥–µ–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞–º–∏!
```

### –®–∞–≥ 2: –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π (–ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ai.py)

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `ai.py` –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è:

```
[AI] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤: data/ai/models/signal_predictor.pkl
[AI]    üìä –ú–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞: 2025-11-10T01:22:27
[AI] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏: data/ai/models/profit_predictor.pkl
[AI] ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω scaler: data/ai/models/scaler.pkl
[AI] ü§ñ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥–µ–ª–µ–π: 3/3 - –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞–º–∏!
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞–º–∏ (bots.py)

–ö–æ–≥–¥–∞ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞:

```python
# –í bot_class.py -> should_open_long()
if ai_enabled:
    ai_result = should_open_position_with_ai(...)
    
    if ai_result.get('ai_used') and not ai_result.get('should_open'):
        logger.info(f"ü§ñ AI –±–ª–æ–∫–∏—Ä—É–µ—Ç LONG: {ai_result.get('reason')}")
        return False  # –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
```

AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è:

```
[AI] ü§ñ AI –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è BTCUSDT: LONG (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 82%, –ø—Ä–∏–±—ã–ª—å: 15.5 USDT)
[BOT] ü§ñ AI –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç LONG (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 82%)
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–µ–π

### signal_predictor.pkl
- **–¢–∏–ø**: RandomForestClassifier
- **–í—Ö–æ–¥**: –ü—Ä–∏–∑–Ω–∞–∫–∏ (RSI, —Ç—Ä–µ–Ω–¥, —Ü–µ–Ω–∞, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ —Ç.–¥.)
- **–í—ã—Ö–æ–¥**: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (LONG/SHORT/WAIT) + —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å

### profit_predictor.pkl
- **–¢–∏–ø**: GradientBoostingRegressor
- **–í—Ö–æ–¥**: –¢–µ –∂–µ –ø—Ä–∏–∑–Ω–∞–∫–∏
- **–í—ã—Ö–æ–¥**: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫ –≤ USDT

### scaler.pkl
- **–¢–∏–ø**: StandardScaler
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø–µ—Ä–µ–¥ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ–º

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –º–æ–¥–µ–ª–µ–π:

```bash
ls -la data/ai/models/
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ñ–∞–π–ª—ã:
- `signal_predictor.pkl`
- `profit_predictor.pkl`
- `scaler.pkl`

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:

```bash
cat data/ai/models/signal_predictor_metadata.json
```

–ü—Ä–∏–º–µ—Ä:
```json
{
  "model_type": "RandomForestClassifier",
  "saved_at": "2025-11-10T01:22:27",
  "n_estimators": 100,
  "max_depth": 10
}
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Auto Bot:

```json
{
  "ai_enabled": true,
  "ai_min_confidence": 0.7
}
```

- `ai_enabled`: –í–∫–ª—é—á–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI –º–æ–¥–µ–ª–µ–π
- `ai_min_confidence`: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è (0.0-1.0)

## üö® –í–∞–∂–Ω–æ

1. **–ú–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—É—á–µ–Ω—ã** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–æ—Ç–∞–º–∏
2. **–ú–∏–Ω–∏–º—É–º 50 —Å–¥–µ–ª–æ–∫** —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
3. **–ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ai.py
4. **–ë–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–æ–¥–µ–ª–∏** —á–µ—Ä–µ–∑ ai_integration.py
5. **–ú–æ–¥–µ–ª–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—É—á–µ–Ω–∏–∏ (–∫–∞–∂–¥—ã–π —á–∞—Å)

## üìù –õ–æ–≥–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç:

```
[BOT] ü§ñ AI –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç LONG (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 82%)
[BOT] ü§ñ AI –±–ª–æ–∫–∏—Ä—É–µ—Ç SHORT (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 45%)
[AI] ü§ñ AI –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è BTCUSDT: LONG (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: 82%, –ø—Ä–∏–±—ã–ª—å: 15.5 USDT)
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

–ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è:
- **–ö–∞–∂–¥—ã–π —á–∞—Å** - –µ—Å–ª–∏ –µ—Å—Ç—å –º–∏–Ω–∏–º—É–º 50 –Ω–æ–≤—ã—Ö —Å–¥–µ–ª–æ–∫
- **–ü—Ä–∏ —Ä—É—á–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏** - —á–µ—Ä–µ–∑ `ai.py`

–°—Ç–∞—Ä—ã–µ –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–æ–≤—ã–º–∏.

