# Cursor Rules для InfoBot

## Git Push Workflow

Когда пользователь пишет "пуш" или "gei" или "push", выполни следующие действия в указанном порядке:

1. **Проверка статуса:**
   - Выполни git status чтобы увидеть измененные файлы

2. **Добавление файлов:**
   - Добавь все измененные файлы через git add <файлы> или git add -A если нужно добавить все

3. **Создание commit:**
   - Создай commit с осмысленным сообщением на основе изменений
   - Используй формат: git commit -m "Описание изменений"
   - Если изменений много, перечисли основные изменения

4. **Push в основной репозиторий:**
   - Выполни git push для отправки в origin/main

5. **Синхронизация с публичным репозиторием:**
   - Выполни python sync_to_public.py для синхронизации файлов
   - Перейди в публичный репозиторий: cd ..\InfoBot_Public
   - Добавь изменения: git add -A
   - Создай commit с тем же сообщением: git commit -m "то же сообщение"
   - Выполни pull перед push: git pull
   - Выполни push: git push

6. **Подтверждение:**
   - Сообщи пользователю о успешном выполнении всех шагов

## Важные замечания:

- НЕ используй git commit -a без явного указания пользователя
- Всегда проверяй статус перед commit
- Используй осмысленные сообщения коммитов на русском языке
- Если есть конфликты при pull, сообщи пользователю
- Если публичный репозиторий не найден, пропусти шаги 5-6 и сообщи об этом

## Пример сообщения коммита:

- "Миграция bots.py: замена JSON на БД для хранения состояния ботов"
- "Полная миграция bots.py: все JSON данные перенесены в БД"
- "Исправление ошибки в функции save_bots_state"
- "Добавлена поддержка новой функции X"

## Важное правило для конфигурационных файлов:

**КРИТИЧЕСКИ ВАЖНО:** При обновлении любого конфигурационного файла (например, `bot_engine/bot_config.py`) ВСЕГДА обновляй также его example версию (например, `bot_engine/example.bot_config.py`).

- Example файлы являются эталонными и должны содержать актуальные дефолтные настройки
- При изменении конфига сначала обнови example версию, затем обнови сам конфиг
- Это гарантирует, что новые установки получат актуальные настройки по умолчанию
- Если конфиг не отслеживается в git (в .gitignore), то example версия - единственный способ сохранить дефолтные настройки

**Примеры пар файлов:**
- `bot_engine/bot_config.py` ↔ `bot_engine/example.bot_config.py`
- `app/config.py` ↔ `app/config.example.py` (если есть)
- Любые другие конфиги с example версиями
