# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –≤ UI

**–î–∞—Ç–∞:** 15 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** Bugfix

## –ü—Ä–æ–±–ª–µ–º–∞

–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–ª–∞ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ –±–µ–∑ –±–æ—Ç–æ–≤ (—Ä—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏), –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∞ –∏—Ö –≤ UI —Ñ–∏–ª—å—Ç—Ä–µ "–†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏".

### –°–∏–º–ø—Ç–æ–º—ã
```
[SYNC_EXCHANGE] üö´ –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º 1 –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ –±–æ—Ç–æ–≤ (–≤—Å–µ–≥–æ –Ω–∞ –±–∏—Ä–∂–µ: 1)
```

–°–∏—Å—Ç–µ–º–∞ –≤–∏–¥–µ–ª–∞ –ø–æ–∑–∏—Ü–∏—é, –Ω–æ –≤ UI —Ñ–∏–ª—å—Ç—Ä "–†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏" –±—ã–ª –ø—É—Å—Ç.

## –ü—Ä–∏—á–∏–Ω–∞

–í API endpoints –∫–æ–¥ –ø–æ–ª—É—á–∞–ª –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ —Å –±–∏—Ä–∂–∏ –∏ –ø–æ–º–µ—á–∞–ª –∏—Ö –∫–∞–∫ "—Ä—É—á–Ω—ã–µ", –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –ø–æ–∑–∏—Ü–∏–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï–¢ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ.

### –õ–æ–∫–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º—ã

**–§–∞–π–ª:** `bots_modules/api_endpoints.py`

1. **Endpoint:** `/api/bots/coins-with-rsi` (—Å—Ç—Ä–æ–∫–∏ 388-418)
2. **Endpoint:** `/api/bots/manual-positions/refresh` (—Å—Ç—Ä–æ–∫–∏ 288-326)

### –ö–æ–¥ –î–û –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```python
# –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–∏–º–≤–æ–ª—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
for pos in positions_list:
    if abs(float(pos.get('size', 0))) > 0:
        symbol = pos.get('symbol', '')
        clean_symbol = symbol.replace('USDT', '') if symbol else ''
        if clean_symbol and clean_symbol not in manual_positions:
            manual_positions.append(clean_symbol)  # ‚ùå –î–æ–±–∞–≤–ª—è–ª–∏ –í–°–ï –ø–æ–∑–∏—Ü–∏–∏
```

## –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–æ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏. –¢–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–∏ –ë–ï–ó –±–æ—Ç–æ–≤ –ø–æ–ø–∞–¥–∞—é—Ç –≤ —Å–ø–∏—Å–æ–∫ —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π.

### –ö–æ–¥ –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```python
# –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –±–æ—Ç–∞–º–∏
with bots_data_lock:
    system_bot_symbols = set(bots_data['bots'].keys())

# –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–∏–º–≤–æ–ª—ã —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï–¢ –±–æ—Ç–æ–≤
for pos in positions_list:
    if abs(float(pos.get('size', 0))) > 0:
        symbol = pos.get('symbol', '')
        clean_symbol = symbol.replace('USDT', '') if symbol else ''
        
        # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ù–ï–¢ –±–æ—Ç–∞ –¥–ª—è —ç—Ç–æ–π –º–æ–Ω–µ—Ç—ã
        if clean_symbol and clean_symbol not in system_bot_symbols:
            if clean_symbol not in manual_positions:
                manual_positions.append(clean_symbol)
```

## –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `bots_modules/api_endpoints.py`

#### 1. Endpoint `/api/bots/coins-with-rsi` (—Å—Ç—Ä–æ–∫–∏ 388-418)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `system_bot_symbols`
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó –±–æ—Ç–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –ª–æ–≥: `"—Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó –±–æ—Ç–æ–≤"`

#### 2. Endpoint `/api/bots/manual-positions/refresh` (—Å—Ç—Ä–æ–∫–∏ 288-326)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `system_bot_symbols`
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó –±–æ—Ç–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –ª–æ–≥: `"—Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó –±–æ—Ç–æ–≤"`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω docstring

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

1. **Backend** (`api_endpoints.py`):
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å –±–∏—Ä–∂–∏ —á–µ—Ä–µ–∑ `exchange.get_positions()`
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–æ—Ç–æ–≤ –∏–∑ `bots_data['bots']`
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏: –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `manual_positions` —Ç–æ–ª—å–∫–æ —Ç–µ, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –±–æ—Ç–æ–≤
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤ JSON: `{..., 'manual_positions': [...]}`

2. **Frontend** (`bots_manager.js`):
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç API
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å–ø–∏—Å–æ–∫ `manual_positions`
   - –ü–æ–º–µ—á–∞–µ—Ç –∫–∞–∂–¥—É—é –º–æ–Ω–µ—Ç—É —Ñ–ª–∞–≥–æ–º: `coin.manual_position = manualPositions.includes(coin.symbol)`
   - –ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–µ –¥–æ–±–∞–≤–ª—è–µ—Ç CSS –∫–ª–∞—Å—Å `manual-position` –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –º–æ–Ω–µ—Ç

3. **UI —Ñ–∏–ª—å—Ç—Ä**:
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ñ–∏–ª—å—Ç—Ä "–†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏"
   - –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∫–ª–∞—Å—Å–æ–º `manual-position`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä "‚úã" –≤–æ–∑–ª–µ —Å–∏–º–≤–æ–ª–∞ –º–æ–Ω–µ—Ç—ã

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–õ–æ–≥–∏**: –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ä—É—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   [MANUAL_POSITIONS] ‚úã 1 —Ä—É—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó –±–æ—Ç–æ–≤
   ```

2. **UI**: –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–æ—Ç–æ–≤
   - –ù–∞–π–¥–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏"
   - –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –º–æ–Ω–µ—Ç—ã —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º "‚úã"
   - –ö–ª–∏–∫ –ø–æ —Ñ–∏–ª—å—Ç—Ä—É –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –º–æ–Ω–µ—Ç—ã

3. **API –ø—Ä–æ–≤–µ—Ä–∫–∞**: 
   ```bash
   curl http://localhost:5001/api/bots/coins-with-rsi
   ```
   –î–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å `"manual_positions": ["SYMBOL"]` –µ—Å–ª–∏ –µ—Å—Ç—å —Ä—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏

## –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –±–∏—Ä–∂–µ –≤—Ä—É—á–Ω—É—é (–Ω–µ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É)
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥ (—Ü–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–∏
4. –û—Ç–∫—Ä–æ–π—Ç–µ UI ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Bots
5. –ö–ª–∏–∫–Ω–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏"
6. –ú–æ–Ω–µ—Ç–∞ —Å —Ä—É—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–µ–π –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º "‚úã"

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `bots_modules/api_endpoints.py` - API endpoints
- `bots_modules/sync_and_cache.py` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π
- `static/js/managers/bots_manager.js` - UI –º–µ–Ω–µ–¥–∂–µ—Ä –±–æ—Ç–æ–≤

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- ‚úÖ –§–∏–ª—å—Ç—Ä —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ, –∫–∞–∫ –¥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞ –º–µ–∂–¥—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –∏ API
- ‚úÖ –†—É—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ = –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ –ë–ï–ó –±–æ—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –¢–∞–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è)

## –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É

- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (–æ–¥–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `in set`)
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ü–æ–ª–Ω–∞—è
- **–†–∏—Å–∫–∏:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- **–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫:** –î–∞ (—Å–µ—Ä–≤–∏—Å bots.py)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** –û–∂–∏–¥–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º


