# ‚öôÔ∏è OPTIMAL EMA - –ü–û–õ–ù–û–ï –†–£–ö–û–í–û–î–°–¢–í–û

**–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö EMA –ø–µ—Ä–∏–æ–¥–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã**

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ß—Ç–æ —Ç–∞–∫–æ–µ Optimal EMA](#—á—Ç–æ-—Ç–∞–∫–æ–µ-optimal-ema)
2. [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
3. [Optimal EMA Worker](#optimal-ema-worker)
4. [–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (5000+ –º–æ–Ω–µ—Ç)](#–º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üéØ –ß–¢–û –¢–ê–ö–û–ï OPTIMAL EMA

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è:
- **–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã EMA** –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏** –º–æ–Ω–µ—Ç—ã

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã
- ‚úÖ –£—á–µ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –º–æ–Ω–µ—Ç—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### 1. –ó–∞–ø—É—Å–∫ —Ä–∞—Å—á–µ—Ç–∞:
```bash
python optimal_ema.py --all
```

### 2. –§–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏:
```
data/optimal_ema.json
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```json
{
  "BTCUSDT": {
    "fast": 12,
    "slow": 26,
    "last_update": "2025-10-09T00:00:00"
  }
}
```

---

## üîß OPTIMAL EMA WORKER

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ **6 —á–∞—Å–æ–≤**
- –û–±–Ω–æ–≤–ª—è–µ—Ç **—Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è** –º–æ–Ω–µ—Ç—ã
- –õ–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –≤ `logs/optimal_ema.log`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
```python
# –í –ø–∞–º—è—Ç–∏ (8377730, 8377734)
OPTIMAL_EMA_UPDATE_INTERVAL = 6 * 3600  # 6 —á–∞—Å–æ–≤

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
optimal_ema.py --all
```

### –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –º–æ–Ω–µ—Ç—ã
python optimal_ema.py --all

# –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–æ–Ω–µ—Ç—É
python optimal_ema.py --symbol BTCUSDT
```

---

## üìä –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï (5000+ –ú–û–ù–ï–¢)

### –ü—Ä–æ–±–ª–µ–º–∞:
- **5000+ –º–æ–Ω–µ—Ç** –Ω–∞ –±–∏—Ä–∂–µ
- –†–∞—Å—á–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∑–∞–Ω–∏–º–∞–µ—Ç **—á–∞—Å—ã**
- –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ API –±–∏—Ä–∂–∏

### –†–µ—à–µ–Ω–∏–µ:

#### 1. –ü–∞–∫–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
```python
BATCH_SIZE = 50  # –ú–æ–Ω–µ—Ç –∑–∞ —Ä–∞–∑
DELAY_BETWEEN_BATCHES = 60  # –°–µ–∫—É–Ω–¥
```

#### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ñ–∞–π–ª
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏—Ö—Å—è
- –ü—Ä–æ–ø—É—Å–∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö –º–æ–Ω–µ—Ç

#### 3. –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:
```python
# –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –ê–∫—Ç–∏–≤–Ω—ã–µ –º–æ–Ω–µ—Ç—ã (–±–æ–ª—å—à–æ–π –æ–±—ä–µ–º)
- –ú–æ–Ω–µ—Ç—ã —Å –±–æ—Ç–∞–º–∏
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–∞—Ä—ã

# –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç  
- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–æ–Ω–µ—Ç—ã
- –ú–∞–ª—ã–π –æ–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤–ª–∏
```

---

## üìà –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í –¢–û–†–ì–û–í–õ–ï

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º:
```python
from bots import load_optimal_ema

# –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
optimal_ema = load_optimal_ema()

# –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–µ—Ç—ã
periods = optimal_ema.get("BTCUSDT", {
    "fast": 12,  # –î–µ—Ñ–æ–ª—Ç
    "slow": 26
})

# –†–∞—Å—á–µ—Ç EMA
ema_fast = calculate_ema(prices, periods["fast"])
ema_slow = calculate_ema(prices, periods["slow"])
```

---

## üõ†Ô∏è API ENDPOINTS

### –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:
```
GET  /api/optimal-ema              # –í—Å–µ –º–æ–Ω–µ—Ç—ã
GET  /api/optimal-ema/<symbol>     # –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –º–æ–Ω–µ—Ç–∞
POST /api/optimal-ema/update       # –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ
POST /api/optimal-ema/update/<symbol>  # –û–±–Ω–æ–≤–∏—Ç—å –æ–¥–Ω—É
```

---

## üìù –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### –§–∞–π–ª –ª–æ–≥–æ–≤:
```
logs/optimal_ema.log
```

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:
```
[OPTIMAL_EMA] üöÄ –ó–∞–ø—É—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–ª—è 500 –º–æ–Ω–µ—Ç
[OPTIMAL_EMA] ‚è±Ô∏è –ü–∞–∫–µ—Ç 1/10 (50 –º–æ–Ω–µ—Ç) - –Ω–∞—á–∞–ª–æ
[OPTIMAL_EMA] ‚úÖ BTCUSDT: fast=12, slow=26
[OPTIMAL_EMA] ‚è±Ô∏è –ü–∞–∫–µ—Ç 1/10 –∑–∞–≤–µ—Ä—à–µ–Ω –∑–∞ 45.2 —Å–µ–∫—É–Ω–¥
[OPTIMAL_EMA] üéâ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 500 –º–æ–Ω–µ—Ç –∑–∞ 8.5 –º–∏–Ω—É—Ç
```

---

## üéØ –ò–¢–û–ì

Optimal EMA —Å–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–π –º–æ–Ω–µ—Ç—ã
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ 5000+ –º–æ–Ω–µ—Ç
- ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–æ—Ä–≥–æ–≤—ã–º–∏ –±–æ—Ç–∞–º–∏

**–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç EMA –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–æ–≤!**
