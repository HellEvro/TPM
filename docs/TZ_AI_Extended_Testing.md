# AI Extended Testing & Simulation Upgrade Plan

## 1. –ò–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–π –∏–∑ `DEFAULT_AUTO_BOT_CONFIG` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–±–æ—Ç—ã, AI, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è), –º–µ—Ç—Ä–∏–∫–∏ –≤–ª–∏—è–Ω–∏—è (PnL, —Ä–∏—Å–∫, —Å–∏–≥–Ω–∞–ª—ã) –∏ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤.
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`individual_coin_settings`) –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ –∂–µ –∫–ª—é—á–∏ + AI‚Äë—Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é (`ai_trained`, `ai_win_rate`, `ai_rating`, `ai_trades_count`, `ai_total_pnl`, `ai_trained_at`, `updated_at`).
- –§–æ—Ä–º–∞—Ç –≤—ã–≥—Ä—É–∑–∫–∏ ‚Äî Markdown/JSON-–º–∞—Ç—Ä–∏—Ü–∞ ¬´–∫–ª—é—á ‚Üí –≤–ª–∏—è–Ω–∏–µ/–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç¬ª, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–ø—É—Å–∫–∏ –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏.

## 2. –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è AI ‚úÖ
- `bots_modules.imports_and_globals.get_config_snapshot()` ‚Äî –µ–¥–∏–Ω—ã–π —Å–ª–µ–ø–æ–∫ (–≥–ª–æ–±–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ + overrides + merged).
- `ai_trainer` –∏ `ai_backtester_new` –¥–µ—Ä–≥–∞—é—Ç —Ç–æ–ª—å–∫–æ —Å–ª–µ–ø–æ–∫, fallback ‚Äî `DEFAULT_AUTO_BOT_CONFIG` + JSON –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.
- `set_individual_coin_settings`/API —É–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –ª—é–±—ã–µ –ø–æ–ª—è; —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–µ–∂–µ—Ç –Ω–æ–≤—ã–µ –∫–ª—é—á–∏ (–Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã).
- TODO: `ai_backtester_new` –ø–æ–¥—Ç—è–Ω—É—Ç—å –∫ –Ω–æ–≤–æ–º—É Protection Engine (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ).

## 3. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –ø–æ–¥ –∑–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã (–≤ —Ä–∞–±–æ—Ç–µ)
- üÜï `bot_engine/protections.py` ‚Äî –µ–¥–∏–Ω–æ–µ —è–¥—Ä–æ break-even / —Ç—Ä–µ–π–ª–∏–Ω–≥ / max_position_hours / stop-loss.
- `ai_trainer` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ProtectionState` + `evaluate_protections()`; —Å–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞—â–∏—Ç—ã.
- `ai_backtester_new` –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ —Ç–æ—Ç –∂–µ –¥–≤–∏–∂–æ–∫ (history run + candle run), —Ç–µ–ø–µ—Ä—å —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∞–≤—Ç–æ–±–æ—Ç–∞.
- `NewTradingBot.check_protection_mechanisms()` –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —è–¥—Ä—É, –∏–¥—ë—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∏—Ä–∂–µ–≤—ã—Ö —Å—Ç–æ–ø–æ–≤.
- ‚úÖ –ë–æ–µ–≤–æ–µ —è–¥—Ä–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ `bot_engine.filters`: `bots_modules/filters.py` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç —Ç–µ –∂–µ RSI/ExitScam —Ä–∞—Å—á—ë—Ç—ã, —á—Ç–æ –∏ AI, –±–µ–∑ –ª–µ–≥–∞—Å–∏-–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π.
- ‚úÖ `check_missing_stop_losses()` —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç `NewTradingBot`/`ProtectionState` –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç `evaluate_protections()` –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –±–∏—Ä–∂–µ–≤—ã—Ö SL/TP, —Ç–∞–∫ —á—Ç–æ –≤–æ—Ä–∫–µ—Ä —Å—Ç–∞–≤–∏—Ç –æ—Ä–¥–µ—Ä–∞ –ø–æ —Ç–µ–º –∂–µ –ø—Ä–∞–≤–∏–ª–∞–º, —á—Ç–æ –∏ —Å–∏–º—É–ª—è—Ü–∏—è.

## 4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–ª–∞–≥–æ–≤ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- ‚úÖ RSI Time Filter –∏ ExitScam –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ `ai_trainer`/`ai_backtester_new` —á–µ—Ä–µ–∑ `bot_engine/ai/filter_utils.py` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π –∫–æ–¥ `bot_engine.filters`).
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã —á–µ–∫–±–æ–∫—Å—ã `avoid_down_trend`/`avoid_up_trend`, `enable_maturity_check`, –∞ —Ç–∞–∫–∂–µ scope/whitelist/blacklist ‚Äî AI –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ –º–æ–Ω–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–º –±–æ—Ç–æ–º.
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `trading_enabled` –∏ `use_test_server`: –ø—Ä–∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏/–±—ç–∫—Ç–µ—Å—Ç—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç —Å–¥–µ–ª–æ–∫ –ø–æ –º–æ–Ω–µ—Ç–µ.
- TODO: —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º (–ª–æ–≥ –ø—Ä–∏—á–∏–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏, —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞).

## 5. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞
- ‚úÖ `ai_strategy_optimizer` —á–∏—Ç–∞–µ—Ç `data/ai/optimizer_genomes.json` (–≥—Ä–∞–Ω–∏—Ü—ã/—à–∞–≥–∏/–ª–∏–º–∏—Ç—ã) –∏ —Å—Ç—Ä–æ–∏—Ç –¥–∏–∞–ø–∞–∑–æ–Ω—ã –Ω–∞ –ª–µ—Ç—É –≤–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞.
- ‚úÖ –í –ª–æ–≥–∞—Ö –≤—ã–≤–æ–¥—è—Ç—Å—è –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≥–µ–Ω–æ–º–æ–≤, –≤–µ—Ä—Å–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤; –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –¥–∏—Ñ—Ñ –ø–æ –∫–∞–∂–¥–æ–º—É –∫–ª—é—á—É.
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `parameter_genome_version` –≤ —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏.
- ‚úÖ REST/UI: –Ω–æ–≤—ã–π endpoint `/api/ai/optimizer/results` –∏ –ø–∞–Ω–µ–ª—å –≤ BotsManager –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Ç–æ–ø –º–æ–Ω–µ—Ç –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä–∞.

## 6. –¢–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—É—Ä
- ‚úÖ Smoke-–ø–∞—Ä–∏—Ç–µ—Ç: `tests/test_ai_simulator_parity.py` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `NewTradingBot` –∏ AI-—Å–∏–º—É–ª—è—Ü–∏—è —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π `ProtectionState` (–æ—Å–Ω–æ–≤–∞ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π `evaluate_protections`).
- ‚úÖ Smoke‚Äë—Ç–µ—Å—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫: `tests/test_ai_individual_settings.py` –æ–±—É—á–∞–µ—Ç mock-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∫–ª—é—á–µ–π (RSI, —Ñ–∏–ª—å—Ç—Ä—ã, —Ä–∏—Å–∫, AI —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è).
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω unit-—Ç–µ—Å—Ç `tests/test_ai_optimizer_genomes.py`, –∫–æ—Ç–æ—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —á—Ç–µ–Ω–∏–µ/–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≥–µ–Ω–æ–º–æ–≤ (`optimizer_genomes.json`) –∏ max_tests.
- TODO: –±–æ–ª—å—à–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç ¬´—Å–∏–º—É–ª—è—Ü–∏—è vs NewTradingBot¬ª –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–≤–µ—á–∞—Ö, —á—Ç–æ–±—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª–Ω–æ–µ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ —Ä–µ—à–µ–Ω–∏–π.

## 7. –°—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª–æ—Å—å (–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏). –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —à–∞–≥–æ–≤ –≤—ã—à–µ.

