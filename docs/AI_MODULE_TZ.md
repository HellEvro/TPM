# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: AI –º–æ–¥—É–ª—å –¥–ª—è —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

AI –º–æ–¥—É–ª—å (`ai.py`) - —ç—Ç–æ —Å–∞–º–æ–æ–±—É—á–∞—é—â–∞—è—Å—è –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å, –∫–æ—Ç–æ—Ä–∞—è:
- –û–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `bot_config.py`
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–ª—è `bots.py` –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `bots.py`, –Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –Ω–∏–º

**–í–ê–ñ–ù–û**: `bots.py` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–∞–∂–µ –µ—Å–ª–∏ `ai.py` –Ω–µ –∑–∞–ø—É—â–µ–Ω.

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### 2.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
ai.py (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
‚îú‚îÄ‚îÄ bot_engine/ai/
‚îÇ   ‚îú‚îÄ‚îÄ ai_data_collector.py      # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (—Å–≤–µ—á–∏, –∏—Å—Ç–æ—Ä–∏—è —Å–¥–µ–ª–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ ai_trainer.py              # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ ai_backtester_new.py       # –ë—ç–∫—Ç–µ—Å—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ ai_strategy_optimizer.py   # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ ai_bot_manager.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ ai_integration.py          # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å bots.py
‚îÇ   ‚îî‚îÄ‚îÄ ai_candles_loader.py       # –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–≤–µ—á–µ–π
‚îî‚îÄ‚îÄ data/ai/
    ‚îú‚îÄ‚îÄ models/                    # –û–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (.pkl)
    ‚îú‚îÄ‚îÄ candles_full_history.json  # –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Å–≤–µ—á–µ–π
    ‚îú‚îÄ‚îÄ ai_decisions_tracking.json # –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π AI
    ‚îú‚îÄ‚îÄ ai_training_history.json   # –ò—Å—Ç–æ—Ä–∏—è –æ–±—É—á–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ ai_performance_metrics.json # –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### 2.2 –¶–∏–∫–ª —Ä–∞–±–æ—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ai.py      ‚îÇ –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ  (–æ–±—É—á–µ–Ω–∏–µ) ‚îÇ ‚Üí –°–∏–º—É–ª—è—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏
‚îÇ             ‚îÇ ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚Üì –ú–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  bots.py    ‚îÇ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AI –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ
‚îÇ  (—Ç–æ—Ä–≥–æ–≤–ª—è) ‚îÇ ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ AI –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
‚îÇ             ‚îÇ ‚Üí –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è (AI/SCRIPT)
‚îÇ             ‚îÇ ‚Üí –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚Üì –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–¥–µ–ª–æ–∫
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ai.py      ‚îÇ –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
‚îÇ  (–ø–µ—Ä–µ–æ–±—É—á.)‚îÇ ‚Üí –ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π
‚îÇ             ‚îÇ ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## 3. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 3.1 –û–±—É—á–µ–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–¶–µ–ª—å**: –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `bot_config.py`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –í–°–ï –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–≤–µ—á–∏ –¥–ª—è –≤—Å–µ—Ö –º–æ–Ω–µ—Ç (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `bot_config.py`:
  - `RSI_OVERSOLD` (29) - –≤—Ö–æ–¥ LONG
  - `RSI_OVERBOUGHT` (71) - –≤—Ö–æ–¥ SHORT
  - `RSI_EXIT_LONG_WITH_TREND` (65) - –≤—ã—Ö–æ–¥ LONG –ø–æ —Ç—Ä–µ–Ω–¥—É
  - `RSI_EXIT_LONG_AGAINST_TREND` (60) - –≤—ã—Ö–æ–¥ LONG –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞
  - `RSI_EXIT_SHORT_WITH_TREND` (35) - –≤—ã—Ö–æ–¥ SHORT –ø–æ —Ç—Ä–µ–Ω–¥—É
  - `RSI_EXIT_SHORT_AGAINST_TREND` (40) - –≤—ã—Ö–æ–¥ SHORT –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞
  - `max_loss_percent` (15%) - —Å—Ç–æ–ø-–ª–æ—Å—Å
  - `take_profit_percent` (20%) - —Ç–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç
- –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
  - –ü—Ä–æ—Ö–æ–¥–∏—Ç—å –ø–æ –≤—Å–µ–º —Å–≤–µ—á–∞–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
  - –í—ã—á–∏—Å–ª—è—Ç—å RSI –Ω–∞ –∫–∞–∂–¥–æ–π —Å–≤–µ—á–µ
  - –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ç—Ä–µ–Ω–¥ (EMA 50/200)
  - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º
  - –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (PnL, ROI)
- –û–±—É—á–∞—Ç—å—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Å–∏–º—É–ª—è—Ü–∏–∏:
  - –£—Å–ø–µ—à–Ω—ã–µ —Å–¥–µ–ª–∫–∏ = –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
  - –ù–µ—É—Å–ø–µ—à–Ω—ã–µ —Å–¥–µ–ª–∫–∏ = –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
  - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –º–æ–¥–µ–ª–∏ –≤ `data/ai/models/`

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
- `signal_predictor.pkl` - –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
- `profit_predictor.pkl` - –º–æ–¥–µ–ª—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏
- `scaler.pkl` - –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö

### 3.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ

**–¶–µ–ª—å**: –ü—Ä–∏–º–µ–Ω—è—Ç—å –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤ `bots.py` –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- `bots.py` –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å AI –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ï—Å–ª–∏ AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —à—Ç–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ (—Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞)
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏:
  1. –í—ã–∑—ã–≤–∞—Ç—å `should_open_position_with_ai()` –∏–∑ `ai_integration.py`
  2. AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:
     - `should_open: True/False`
     - `ai_used: True/False`
     - `ai_confidence: 0.0-1.0`
     - `ai_signal: 'LONG'/'SHORT'/'WAIT'`
     - `ai_decision_id: str` (–¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è)
  3. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ —Å –º–∞—Ä–∫–µ—Ä–æ–º:
     - `decision_source: 'AI'` –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è AI
     - `decision_source: 'SCRIPT'` –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å `ai_decision_id` –≤ –±–æ—Ç–µ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**:
```python
# –í bots_modules/bot_class.py
ai_result = should_open_position_with_ai(
    symbol=self.symbol,
    direction='LONG',
    rsi=rsi,
    trend=trend,
    price=current_price,
    config=auto_config
)

if ai_result.get('ai_used') and not ai_result.get('should_open'):
    # AI –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–¥–µ–ª–∫—É
    return False
elif ai_result.get('ai_used') and ai_result.get('should_open'):
    # AI –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–¥–µ–ª–∫—É
    self.ai_decision_id = ai_result.get('ai_decision_id')
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
```

### 3.3 –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ

**–¶–µ–ª—å**: –ü–µ—Ä–µ–æ–±—É—á–∞—Ç—å –º–æ–¥–µ–ª–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ—à–µ–Ω–∏—è AI:
  ```python
  update_ai_decision_result(
      decision_id=self.ai_decision_id,
      pnl=pnl,
      roi=roi,
      is_successful=(pnl > 0)
  )
  ```
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏—è –≤ `data/ai/ai_decisions_tracking.json`:
  ```json
  {
    "decision_id": {
      "symbol": "BTCUSDT",
      "direction": "LONG",
      "rsi": 28.5,
      "trend": "UP",
      "price": 45000,
      "ai_signal": "LONG",
      "ai_confidence": 0.85,
      "status": "SUCCESS",
      "pnl": 150.5,
      "roi": 3.01,
      "timestamp": "2025-01-10T12:00:00",
      "closed_at": "2025-01-10T18:00:00"
    }
  }
  ```
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å—Å—è –Ω–∞ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏—è—Ö:
  - –ú–∏–Ω–∏–º—É–º 10 –∑–∞–∫—Ä—ã—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
  - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ/–Ω–µ—É—Å–ø–µ—à–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
  - –û–±–Ω–æ–≤–ª—è—Ç—å –º–æ–¥–µ–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
  - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –º–æ–¥–µ–ª–µ–π

### 3.4 –ò—Å—Ç–æ—Ä–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –∏ –∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- –í `bot_history.json` –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è:
  - `decision_source: 'AI' | 'SCRIPT'`
  - `ai_decision_id: str | null`
  - `ai_confidence: float | null`
  - `ai_signal: str | null`
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ AI:
  - –ö–æ–≥–¥–∞ AI –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–¥–µ–ª–∫—É
  - –ö–æ–≥–¥–∞ AI –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–¥–µ–ª–∫—É
  - –ö–æ–≥–¥–∞ AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (fallback)
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–µ—à–µ–Ω–∏—è:
  - RSI, —Ç—Ä–µ–Ω–¥, —Ü–µ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–µ—à–µ–Ω–∏—è
  - –†–µ–∑—É–ª—å—Ç–∞—Ç —Å–¥–µ–ª–∫–∏ (PnL, ROI)
  - –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### 4.1 –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π AI

**–§–∞–π–ª**: `data/ai/ai_decisions_tracking.json`

```json
{
  "ai_BTCUSDT_1704892800000": {
    "id": "ai_BTCUSDT_1704892800000",
    "symbol": "BTCUSDT",
    "direction": "LONG",
    "rsi": 28.5,
    "trend": "UP",
    "price": 45000,
    "ai_signal": "LONG",
    "ai_confidence": 0.85,
    "market_data": {
      "rsi": 28.5,
      "trend": "UP",
      "price": 45000,
      "direction": "LONG"
    },
    "timestamp": "2025-01-10T12:00:00",
    "status": "SUCCESS",
    "pnl": 150.5,
    "roi": 3.01,
    "closed_at": "2025-01-10T18:00:00"
  }
}
```

### 4.2 –ò—Å—Ç–æ—Ä–∏—è –æ–±—É—á–µ–Ω–∏—è

**–§–∞–π–ª**: `data/ai/ai_training_history.json`

```json
{
  "trainings": [
    {
      "id": "training_1704892800",
      "timestamp": "2025-01-10T12:00:00",
      "type": "historical_simulation",
      "samples_count": 5000,
      "simulated_trades": 250,
      "successful_trades": 150,
      "win_rate": 0.60,
      "model_version": "v1.0",
      "metrics": {
        "signal_accuracy": 0.75,
        "profit_mse": 12.5
      }
    }
  ]
}
```

### 4.3 –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–π–ª**: `data/ai/ai_performance_metrics.json`

```json
{
  "overall": {
    "total_ai_decisions": 100,
    "successful_decisions": 65,
    "failed_decisions": 35,
    "win_rate": 0.65,
    "avg_pnl": 45.2,
    "total_pnl": 4520
  },
  "vs_script": {
    "ai_win_rate": 0.65,
    "script_win_rate": 0.58,
    "ai_avg_pnl": 45.2,
    "script_avg_pnl": 38.5
  },
  "by_symbol": {
    "BTCUSDT": {
      "decisions": 20,
      "win_rate": 0.70,
      "avg_pnl": 55.0
    }
  }
}
```

## 5. UI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### 5.1 –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏

**–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å—Ç–æ—Ä–∏–∏** (`/history`)

**–ù–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**:
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è:
  - üü¢ –ó–µ–ª–µ–Ω—ã–π - —Ä–µ—à–µ–Ω–∏–µ AI
  - üîµ –°–∏–Ω–∏–π - —Å–∫—Ä–∏–ø—Ç–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ
- –§–∏–ª—å—Ç—Ä—ã:
  - –ü–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É —Ä–µ—à–µ–Ω–∏—è (AI / –°–∫—Ä–∏–ø—Ç–æ–≤–æ–µ)
  - –ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (–£—Å–ø–µ—à–Ω—ã–µ / –ù–µ—É—Å–ø–µ—à–Ω—ã–µ)
  - –ü–æ —Å–∏–º–≤–æ–ª—É
  - –ü–æ –¥–∞—Ç–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - Win rate AI vs –°–∫—Ä–∏–ø—Ç–æ–≤—ã–µ
  - –°—Ä–µ–¥–Ω–∏–π PnL AI vs –°–∫—Ä–∏–ø—Ç–æ–≤—ã–µ
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π AI

### 5.2 API endpoints

**–ù–æ–≤—ã–µ endpoints**:
- `GET /api/ai/decisions` - —Å–ø–∏—Å–æ–∫ —Ä–µ—à–µ–Ω–∏–π AI
- `GET /api/ai/performance` - –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `GET /api/ai/training-history` - –∏—Å—Ç–æ—Ä–∏—è –æ–±—É—á–µ–Ω–∏—è
- `GET /api/ai/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ AI vs —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ
- `GET /api/ai/models` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª—è—Ö

## 6. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 6.1 –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

- ‚úÖ `bots.py` –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–∞–∂–µ –µ—Å–ª–∏ `ai.py` –Ω–µ –∑–∞–ø—É—â–µ–Ω
- ‚úÖ –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI - fallback –Ω–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ AI –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ try-except –±–ª–æ–∫–∞—Ö
- ‚úÖ –û—à–∏–±–∫–∏ AI –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É `bots.py`

### 6.2 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è AI –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ (< 100ms)
- –û–±—É—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ —Ñ–æ–Ω–µ
- –ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–ª—é –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è

### 6.3 –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±—É—á–µ–Ω–∏–µ–º
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

## 7. –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤ bots.py
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### –≠—Ç–∞–ø 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è AI
- –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É JSON —Ñ–∞–π–ª–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏
- –î–æ–±–∞–≤–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 3: UI —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ä–µ—à–µ–Ω–∏—è
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
- –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –≠—Ç–∞–ø 4: API endpoints
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å–µ endpoints
- –î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –≠—Ç–∞–ø 5: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–∫–∞—Ç –ø—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏

## 8. –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

- ‚úÖ `bots.py` —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ `ai.py`
- ‚úÖ –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –º–∞—Ä–∫–µ—Ä–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ UI
- ‚úÖ AI –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

