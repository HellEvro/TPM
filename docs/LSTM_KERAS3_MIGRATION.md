# –ú–∏–≥—Ä–∞—Ü–∏—è LSTM –º–æ–¥–µ–ª–∏ –Ω–∞ Keras 3 —Ñ–æ—Ä–º–∞—Ç

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ LSTM –º–æ–¥–µ–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
[LSTM] ‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏: Could not deserialize 'keras.metrics.mse' because it is not a KerasSaveable subclass
```

–≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ `.h5` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π.

## –†–µ—à–µ–Ω–∏–µ

–ú—ã –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ –Ω–æ–≤—ã–π –Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Keras 3: `.keras`

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### 1. `bot_engine/ai/lstm_predictor.py`
- –ò–∑–º–µ–Ω–µ–Ω –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `lstm_predictor.h5` ‚Üí `lstm_predictor.keras`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:
  ```python
  old_h5_path = self.model_path.replace('.keras', '.h5')
  if not os.path.exists(self.model_path) and os.path.exists(old_h5_path):
      logger.warning(f"[LSTM] ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å .h5, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ")
      logger.warning(f"[LSTM] –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python scripts/ai/train_lstm_predictor.py")
  ```

#### 2. `scripts/ai/train_lstm_predictor.py`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø—É—Ç–∏: `.h5` ‚Üí `.keras`
- –ú–æ–¥–µ–ª—å —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ Keras 3

#### 3. `.gitignore`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è `.keras` —Ñ–∞–π–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è `.json` –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –í—Å–µ –æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞

1. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å Keras 3
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –±–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞** - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç

### –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–î–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ –≤ –Ω–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ:

```bash
python scripts/ai/train_lstm_predictor.py --coins 0 --epochs 20 --batch-size 64
```

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `data/ai/models/lstm_predictor.keras`

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å `.h5`, –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—å:

```
[LSTM] ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è –º–æ–¥–µ–ª—å .h5, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ
[LSTM] –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python scripts/ai/train_lstm_predictor.py
```

## –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã

1. `bot_engine/ai/lstm_predictor.py` - –æ–±–Ω–æ–≤–ª–µ–Ω –ø—É—Ç—å –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
2. `scripts/ai/train_lstm_predictor.py` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—É—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
3. `.gitignore` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
4. `docs/LSTM_KERAS3_MIGRATION.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

## –î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

18 –æ–∫—Ç—è–±—Ä—è 2025

## –°—Ç–∞—Ç—É—Å

‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
üîÑ –ú–æ–¥–µ–ª—å –ø–µ—Ä–µ–æ–±—É—á–∞–µ—Ç—Å—è...

